{% extends 'base.html' %} {% load static %}
{% block css %}
<style>
    .cursor {
        border-radius: 50%;
        background: red;
        width: 10px;
        height: 10px;
        position: fixed;
        top: 0;
        left: 0;
    }

    .click {
        border-radius: 50%;
        background: red;
        position: fixed;
        width: 20px;
        height: 20px;
    }
</style>
{% endblock %}
{% block content %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<div class="container">
    <br>
    <button id="record" class="btn btn-primary">Record</button>
    <button id="play" onclick='play()' class="btn btn-danger">Play</button>

    <div class="cursor"></div>
    <br />
    <h1 class="mb-5" style="font-size: 200">{{data.disease.name}}</h1>

    <div align="middle" class="table-responsive custom-table-responsive">
        <table>
            {%for l in dataAll%}
            <tr scope="row">
                <img id="img"
                     src="{{l.image}}"
                     width="500"
                     height="350"
                     align="centre"
                     onmouseout="stopRecording(this)" />
            </tr>
            <br />
            <br />

            <tr scope="row" class="bg-dark p-4">
                <audio style="display: none" type="hidden" id="aud" controls="controls">
                    <source src="{{l.audio}}" />
                </audio>
            </tr>

            <br />
            <br />

            <tr scope="row">
                <audio style="display: none" id="audDesc" controls="controls">
                    <source src="{{l.audioDesc}}" />
                </audio>
            </tr>
            <br />
            <br />
            <tr scope="row">
                <p id="desc" align="left">{{l.desc}}</p>
            </tr>
            <br />
            <br />
            {% endfor %}
        </table>
    </div>
</div>
<div class="container">
    <div class="row">
        <div id="controls bg-primary text-center col">
            <button id="recordButton" class="btn btn-primary" style="display: none;">Record</button>
            <button id="pauseButton" class="btn btn-primary" disabled style="display: none;">Pause</button>
            <button id="stopButton" class="btn btn-primary" disabled style="display: none;">Stop</button>
        </div>
        <div class="col">
            <div id="formats">Format: start recording to see sample rate</div>
            <p id="recordingsList">
                </li>
        </div>
    </div>
</div>
<script src="https://cdn.rawgit.com/mattdiamond/Recorderjs/08e7abd9/dist/recorder.js"></script>
<script src="{% static 'index.js' %}"></script>
<script>
    /*var press = jQuery.Event("keypress");
    press.ctrlKey = false;
    press.which = 65;
    $("input").trigger(press);
    */

    $(function () {
        var move = [];
        $('#img').hover(function () {
            startRecording()
            $(document).mousemove(function (e) {
                move.push({
                    x: e.pageX,
                    y: e.pageY
                });
            });

        }, function () {
            $(document).off('mousemove');
        });
        // function start()


        // function end
        $('#play').click(function () {

            var $replay = $('.cursor'),
                pos, i = 0,
                len = move.length,
                t;

            (function anim() {
                pos = move[i];
                $replay.css({
                    top: pos.y,
                    left: pos.x
                });

                i++;
                if (i === len) {
                    clearTimeout(t);
                } else {
                    t = setTimeout(anim, 10);
                }
            })()
        });
    });

    function play() {
        var audio = document.getElementById("audio-player");
        alert(audio)
        audio.play();
    }
</script>

{% endblock %}
